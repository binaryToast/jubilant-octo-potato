<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sumo Scrandle</title>
<style>
  body { font-family: system-ui, sans-serif; background: #0b1220; color: #eee; padding: 20px; }
  h1 { margin-top: 0; }
  .match {
    display: flex; 
    flex-direction: column; 
    padding: 10px; 
    margin-bottom: 10px; 
    background: #202a3a; 
    border-radius: 6px;
  }
  .bout-header { font-weight: bold; margin-bottom: 5px; }
  label { display: block; margin: 2px 0; }
  .correct { background: #144c26; }
  .wrong { background: #5a1c1c; }
</style>
</head>
<body>
<h1>Sumo Scrandle</h1>
<p>Pick the winners for todayâ€™s Makuuchi bouts!</p>
<div id="matches"></div>

<script>
const banzuke = "202509"; // example
const day = 2;            // example

async function loadMatches() {
  // Replace with your real matches.json later
  const response = await fetch('matches.json');
  const matches = await response.json();
  renderMatches(matches);
}

function renderMatches(matches) {
  const key = `${banzuke}-${day}-picks`;
  let saved = JSON.parse(localStorage.getItem(key) || '{}');

  const container = document.getElementById('matches');
  container.innerHTML = '';

  matches.forEach((m, i) => {
    const matchDiv = document.createElement('div');
    matchDiv.className = 'match';
    const header = document.createElement('div');
    header.className = 'bout-header';
    header.textContent = `Bout ${m.bout}`;
    matchDiv.appendChild(header);

    // radio buttons
    const eastLabel = document.createElement('label');
    const eastInput = document.createElement('input');
    eastInput.type = 'radio';
    eastInput.name = `match-${i}`;
    eastInput.value = m.east;
    if (saved[i] === m.east) eastInput.checked = true;
    eastInput.addEventListener('change', () => {
      saved[i] = m.east;
      localStorage.setItem(key, JSON.stringify(saved));
    });
    eastLabel.appendChild(eastInput);
    eastLabel.append(` ${m.east} (East)`);

    const westLabel = document.createElement('label');
    const westInput = document.createElement('input');
    westInput.type = 'radio';
    westInput.name = `match-${i}`;
    westInput.value = m.west;
    if (saved[i] === m.west) westInput.checked = true;
    westInput.addEventListener('change', () => {
      saved[i] = m.west;
      localStorage.setItem(key, JSON.stringify(saved));
    });
    westLabel.appendChild(westInput);
    westLabel.append(` ${m.west} (West)`);

    matchDiv.appendChild(eastLabel);
    matchDiv.appendChild(westLabel);

    // show result if winner present
    if (m.winner) {
      if (saved[i] === m.winner) {
        matchDiv.classList.add('correct');
      } else {
        matchDiv.classList.add('wrong');
      }
      const result = document.createElement('div');
      result.textContent = `Winner: ${m.winner}`;
      matchDiv.appendChild(result);
    }

    container.appendChild(matchDiv);
  });
}

loadMatches();
</script>
</body>
</html>
